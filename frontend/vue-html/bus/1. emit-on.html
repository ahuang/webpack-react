<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://vuejs.org/js/vue.js"></script>
    <title>emit on demo</title>
</head>
<body>
    <div id="app">
        <h1>books (父子组件使用emit&&on通信demo)</h1>
        <book-list :books="books" @book-id="handleBookId"></book-list>
        <p style="color: red" v-show="message">{{message}}</p>
    </div>
</body> 
<script>
Vue.component('bookList',{ // 子组件 book list
    template: `<div>
                    <ol>
                        <li v-for="b in books" :key="b.id">
                            <a @click="handleClick(b.id)">{{b.name}}</a>
                        </li>
                    </ol>
               </div>`,
    props: ['books'],
    methods: {
        handleClick(bookId){
            this.$emit('book-id',bookId);            
        }
    }
});
const vm = new Vue({ // 父组件    
    el: '#app',
    data() {
        return {
            books: [
                {id: 1, name: 'Animal World', main: 'introduce animals', price: 45},
                {id: 2, name: 'How to make cake?', main: 'methods to make cakes', price: 33},
                {id: 3, name: 'storys', main: 'storis about famous people', price: 100},
            ],
            message: ''
        }
    },
    methods: {
        handleBookId(value){
            this.message = `you select book ${value}`;
        }
    }
});


</script>
<style>
    a{
        text-decoration: underline;
        color: green;        
        cursor: pointer;
    }
</style>
</html>